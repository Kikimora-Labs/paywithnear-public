"use strict";(self.webpackChunknearpay_donate=self.webpackChunknearpay_donate||[]).push([[59],{7691:function(e,n,r){r.r(n),r.d(n,{default:function(){return Q}});var a=r(9824),s=r.n(a),i=r(184),c=s()("pay-with-near-agreement"),l=function(e){var n=e.className;return(0,i.jsxs)("div",{className:c.mix(n),children:["By continuing, you agree to this"," ",(0,i.jsx)("a",{href:"https://nearpay.co/privacy_policy",target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})," ","and"," ",(0,i.jsx)("a",{href:"https://nearpay.co/terms_of_use",target:"_blank",rel:"noopener noreferrer",children:"terms of service"})]})},t=r(4443),d=r(8683),o=r(4925),u=r(1694),p=r.n(u),h=r(2791),m=["disabled","children","loading","className","withArrow","loadingText","icon"];function x(e){var n=e.disabled,r=e.loading;return n?"ProceedButton--disabled":r?"ProceedButton--loading":"ProceedButton--active"}var y=(0,h.forwardRef)((function(e,n){var r=e.disabled,a=void 0!==r&&r,s=e.children,c=e.loading,l=void 0!==c&&c,t=e.className,u=(e.withArrow,e.loadingText),h=e.icon,y=(0,o.Z)(e,m),f=x({disabled:a,loading:l});return(0,i.jsxs)("button",(0,d.Z)((0,d.Z)({ref:n,className:p()("ProceedButton",f,t),disabled:a},y),{},{children:[l&&u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:u}),(0,i.jsx)("span",{})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:s}),(0,i.jsx)("span",{})]}),h&&(0,i.jsx)("div",{className:"ProceedButton__icon",children:h})]}))})),f=r(948),v=["label","slotAfterInput","slotRight","slotAfterLabel","children","error","size","textSize","className","placeholder"];function j(e){var n=e.label,r=e.slotAfterInput,a=e.slotRight,s=e.slotAfterLabel,c=e.children,l=e.error,t=(e.size,e.textSize,e.className),u=(e.placeholder,(0,o.Z)(e,v));if(r&&a)throw Error("Only one of after input slots can be used");return(0,i.jsxs)("label",(0,d.Z)((0,d.Z)({className:p()("Input",l?"Input--hasError":"",t)},u),{},{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsxs)("div",{className:"Input__header",children:[(0,i.jsx)("div",{className:"Input__label",children:n}),s]}),(0,i.jsxs)("div",{className:"Input__wrapper",children:["function"===typeof c?c({inputClass:"Input__input"}):c,r?(0,i.jsx)("div",{className:"Input__after",children:r}):null]})]}),a?(0,i.jsx)("div",{className:"Input__afterCentered",children:a}):null]}),l?(0,i.jsx)("div",{className:"Input__error",children:l}):null]}))}var N=r(885),b=["icon","className","transform","size","children"];function g(e){e.icon;var n=e.className,r=e.transform,a=e.size,s=e.children,c=(0,o.Z)(e,b),l=function(e){if(!e)return"";for(var n=[],r=0,a=Object.entries(e);r<a.length;r++){var s=(0,N.Z)(a[r],2),i=s[0],c=s[1];n.push("".concat(i,"(").concat(c,")"))}return n.join(",")}(r||{});return(0,i.jsx)("i",(0,d.Z)((0,d.Z)({className:p()("pay-with-near-icon",n),style:{transform:l,width:a,height:a}},c),{},{children:s}))}var w=["currency","className","disabled"];function _(e){var n=e.currency,r=e.className,a=e.disabled,s=(0,o.Z)(e,w);return(0,i.jsxs)("div",(0,d.Z)((0,d.Z)({className:p()("CurrencySelect",a?"CurrencySelect--disabled":"",r)},s),{},{children:[(0,i.jsx)(g,{className:"CurrencySelect__icon",children:(0,i.jsx)("img",{src:n.logoUrl,alt:n.viewedTicker})}),(0,i.jsx)("div",{className:"CurrencySelect__text",children:n.viewedTicker}),(0,i.jsx)(g,{size:20,className:"CurrencySelect__arrow",children:(0,i.jsx)(t.UL,{})})]}))}var k=["onInput","value","label","onValueChange","onCurrencySelectClick","error","selectDisabled","inputDisabled","currency","isLoading"];function C(e){var n=e.onInput,r=e.value,a=e.label,s=e.onValueChange,c=e.onCurrencySelectClick,l=e.error,t=e.selectDisabled,u=e.inputDisabled,p=e.currency,h=e.isLoading,m=void 0!==h&&h,x=(0,o.Z)(e,k),y=p.symbol;return(0,i.jsx)(j,(0,d.Z)((0,d.Z)({label:a,error:l,slotAfterInput:(0,i.jsx)(_,{currency:p,onClick:t?function(){}:function(e){e.preventDefault(),c()},disabled:!!t})},x),{},{children:m?(0,i.jsx)("input",{disabled:!0,readOnly:!0}):(0,i.jsx)(f.Z,{thousandSeparator:!1,prefix:y,onValueChange:s,allowLeadingZeros:!0,decimalScale:p.roundOff,onInput:n,value:r,placeholder:"0.00",readOnly:u})}))}var Z=["className"];function I(e){var n=e.className,r=(0,o.Z)(e,Z);return(0,i.jsx)("div",(0,d.Z)({className:p()("WidgetContainer",n)},r))}var A=r(7892),E=r.n(A),P=(0,a.block)("pay-with-near-pay-timer"),S=function(e){var n=e.expiryAt,r=e.onExpired,a=(0,h.useState)(R(n)),s=(0,N.Z)(a,2),c=s[0],l=s[1];return(0,h.useEffect)((function(){R(n)<0&&r();var e=setTimeout((function(){l(R(n))}),1e3);return function(){return clearTimeout(e)}}),[c,n,r]),R(n)<0?null:(0,i.jsx)("div",{className:P(),children:z(c)})},R=function(e){var n=E()(e),r=E().utc();return n.diff(r)},z=function(e){var n=Math.floor(e/6e4),r=e%6e4,a=Math.floor(r/1e3);return"".concat(n,":").concat(a>9?a:"0".concat(a))},L=r(6009),D=(0,a.block)("pay-with-near-pay-widget"),T=(0,a.block)("pay-with-near-pay-widget-description"),B=function(e){var n=e.payment,r=e.currency,a=e.onPay,s=e.onExpired;return(0,i.jsxs)(I,{className:D(),children:[(0,i.jsx)("div",{className:D("title"),children:n.name}),(0,i.jsx)("div",{className:D("description"),children:n.description}),(0,i.jsxs)("div",{className:T(),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:T("label"),children:"Payment: "}),(0,i.jsx)("div",{children:n.paymentId})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:T("label"),children:"Recipient: "}),(0,i.jsx)("div",{children:n.address})]})]}),(0,i.jsx)(S,{expiryAt:n.expiryAt,onExpired:s}),(0,i.jsx)(C,{label:"Amount to Pay",value:n.displayAmount,currency:r,onValueChange:function(){},onCurrencySelectClick:function(){},selectDisabled:!0,className:"mb-4"}),(0,i.jsx)(y,{onClick:a,children:"Pay with NEAR wallet"}),(0,i.jsx)("div",{className:D("or"),children:"or"}),(0,i.jsx)("div",{className:D("qr-code-container"),children:(0,i.jsx)(L.tv,{value:"".concat(n.address,"?amount=").concat(n.displayAmount)})}),(0,i.jsx)("div",{className:D("payment-method-text"),children:"Scan following\xa0QR code with your wallet or\xa0enter Account\xa0ID\xa0and amount manually."}),(0,i.jsxs)("a",{href:"http://nearpay.co",target:"_blank",rel:"noopener noreferrer",className:p()(D("link-nearpay")),children:[(0,i.jsx)("span",{className:D("link-nearpay_gray"),children:"Powered by"}),"  ",(0,i.jsx)(t.v5,{className:D("link-nearpay_icon"),width:"20",height:"15"}),"  ",(0,i.jsx)("span",{children:"NearPay"})]})]})},U=r(9933),O=r(8767),V=r(4967),M=r(1591),X=r(2419),F="".concat(window.location.origin,"/payment"),W=function(e){var n=e.near,r=e.payment;return r?n.isAuthorized?function(){var e=(0,V.M)(+r.displayAmount);if(!e||!r.address)throw new Error("Data is empty");n.send(e,r.address,"".concat(F,"/").concat(r.paymentId,"/pending"))}:function(){return n.login({successUrl:"".concat(F,"/").concat(r.paymentId,"/send"),failureUrl:"".concat(F,"/").concat(r.paymentId,"/failure")})}:function(){throw new Error("Payment is empty")}},q=(0,a.block)("pay-with-near-payment-page");var Q=function(){var e=function(){var e=(0,X.ZP)("currencies",U.i6.U),n=(0,M.V)(),r=n.payment,a=n.isExpired,s=n.handleExpired,i=(0,V.T)(),c=W({near:i,payment:null!==r&&void 0!==r?r:null}),l=(0,h.useMemo)((function(){var n;return null===(n=e.data)||void 0===n?void 0:n.find((function(e){return e.ticker===O.N.defaultCurrency}))}),[e]);return{isExpired:a,isLoaded:!!e.data&&(!!r||a)&&i.isReady,payment:r,currencies:e.data,currency:l,handlerPay:c,handleExpired:s}}(),n=e.currency,r=e.payment,a=e.isLoaded,s=e.isExpired,c=e.handlerPay,d=e.handleExpired;return a?s?(0,i.jsxs)(t.RX,{className:q(),children:[(0,i.jsx)("span",{className:q("message"),children:"This payment link is expired"}),(0,i.jsx)("a",{className:q("link"),href:O.N.payWithNearUrl,children:"Back to shop"})]}):r&&n?(0,i.jsxs)(t.RX,{children:[(0,i.jsx)(B,{payment:r,currency:n,onPay:c,onExpired:d}),(0,i.jsx)(l,{})]}):null:(0,i.jsx)(t.RX,{children:(0,i.jsx)(t.zL,{children:(0,i.jsx)(t.aN,{})})})}}}]);
//# sourceMappingURL=59.5dd72b20.chunk.js.map