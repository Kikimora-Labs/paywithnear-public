"use strict";(self.webpackChunknearpay_donate=self.webpackChunknearpay_donate||[]).push([[59],{7691:function(e,n,a){a.r(n),a.d(n,{default:function(){return Q}});var r=a(9824),s=a.n(r),i=a(184),c=s()("pay-with-near-agreement"),l=function(e){var n=e.className;return(0,i.jsxs)("div",{className:c.mix(n),children:["By continuing, you agree to this"," ",(0,i.jsx)("a",{href:"https://nearpay.co/privacy_policy",target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})," ","and"," ",(0,i.jsx)("a",{href:"https://nearpay.co/terms_of_use",target:"_blank",rel:"noopener noreferrer",children:"terms of service"})]})},t=a(4443),d=a(8683),o=a(4925),u=a(1694),p=a.n(u),h=a(2791),m=["disabled","children","loading","className","withArrow","loadingText","icon"];function x(e){var n=e.disabled,a=e.loading;return n?"ProceedButton--disabled":a?"ProceedButton--loading":"ProceedButton--active"}var y=(0,h.forwardRef)((function(e,n){var a=e.disabled,r=void 0!==a&&a,s=e.children,c=e.loading,l=void 0!==c&&c,t=e.className,u=(e.withArrow,e.loadingText),h=e.icon,y=(0,o.Z)(e,m),f=x({disabled:r,loading:l});return(0,i.jsxs)("button",(0,d.Z)((0,d.Z)({ref:n,className:p()("ProceedButton",f,t),disabled:r},y),{},{children:[l&&u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:u}),(0,i.jsx)("span",{})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{children:s}),(0,i.jsx)("span",{})]}),h&&(0,i.jsx)("div",{className:"ProceedButton__icon",children:h})]}))})),f=a(948),v=["label","slotAfterInput","slotRight","slotAfterLabel","children","error","size","textSize","className","placeholder"];function j(e){var n=e.label,a=e.slotAfterInput,r=e.slotRight,s=e.slotAfterLabel,c=e.children,l=e.error,t=(e.size,e.textSize,e.className),u=(e.placeholder,(0,o.Z)(e,v));if(a&&r)throw Error("Only one of after input slots can be used");return(0,i.jsxs)("label",(0,d.Z)((0,d.Z)({className:p()("Input",l?"Input--hasError":"",t)},u),{},{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsxs)("div",{className:"Input__header",children:[(0,i.jsx)("div",{className:"Input__label",children:n}),s]}),(0,i.jsxs)("div",{className:"Input__wrapper",children:["function"===typeof c?c({inputClass:"Input__input"}):c,a?(0,i.jsx)("div",{className:"Input__after",children:a}):null]})]}),r?(0,i.jsx)("div",{className:"Input__afterCentered",children:r}):null]}),l?(0,i.jsx)("div",{className:"Input__error",children:l}):null]}))}var N=a(885),b=["icon","className","transform","size","children"];function g(e){e.icon;var n=e.className,a=e.transform,r=e.size,s=e.children,c=(0,o.Z)(e,b),l=function(e){if(!e)return"";for(var n=[],a=0,r=Object.entries(e);a<r.length;a++){var s=(0,N.Z)(r[a],2),i=s[0],c=s[1];n.push("".concat(i,"(").concat(c,")"))}return n.join(",")}(a||{});return(0,i.jsx)("i",(0,d.Z)((0,d.Z)({className:p()("pay-with-near-icon",n),style:{transform:l,width:r,height:r}},c),{},{children:s}))}var w=["currency","className","disabled"];function _(e){var n=e.currency,a=e.className,r=e.disabled,s=(0,o.Z)(e,w);return(0,i.jsxs)("div",(0,d.Z)((0,d.Z)({className:p()("CurrencySelect",r?"CurrencySelect--disabled":"",a)},s),{},{children:[(0,i.jsx)(g,{className:"CurrencySelect__icon",children:(0,i.jsx)("img",{src:n.logoUrl,alt:n.viewedTicker})}),(0,i.jsx)("div",{className:"CurrencySelect__text",children:n.viewedTicker}),(0,i.jsx)(g,{size:20,className:"CurrencySelect__arrow",children:(0,i.jsx)(t.UL,{})})]}))}var k=["onInput","value","label","onValueChange","onCurrencySelectClick","error","selectDisabled","inputDisabled","currency","isLoading"];function C(e){var n=e.onInput,a=e.value,r=e.label,s=e.onValueChange,c=e.onCurrencySelectClick,l=e.error,t=e.selectDisabled,u=e.inputDisabled,p=e.currency,h=e.isLoading,m=void 0!==h&&h,x=(0,o.Z)(e,k),y=p.symbol;return(0,i.jsx)(j,(0,d.Z)((0,d.Z)({label:r,error:l,slotAfterInput:(0,i.jsx)(_,{currency:p,onClick:t?function(){}:function(e){e.preventDefault(),c()},disabled:!!t})},x),{},{children:m?(0,i.jsx)("input",{disabled:!0,readOnly:!0}):(0,i.jsx)(f.Z,{thousandSeparator:!1,prefix:y,onValueChange:s,allowLeadingZeros:!0,decimalScale:p.roundOff,onInput:n,value:a,placeholder:"0.00",readOnly:u})}))}var Z=["className"];function I(e){var n=e.className,a=(0,o.Z)(e,Z);return(0,i.jsx)("div",(0,d.Z)({className:p()("WidgetContainer",n)},a))}var A=a(7892),E=a.n(A),P=(0,r.block)("pay-with-near-pay-timer"),S=function(e){var n=e.expiryAt,a=e.onExpired,r=(0,h.useState)(R(n)),s=(0,N.Z)(r,2),c=s[0],l=s[1];return(0,h.useEffect)((function(){R(n)<0&&a();var e=setTimeout((function(){l(R(n))}),1e3);return function(){return clearTimeout(e)}}),[c,n,a]),R(n)<0?null:(0,i.jsx)("div",{className:P(),children:z(c)})},R=function(e){var n=E()(e),a=E().utc();return n.diff(a)},z=function(e){var n=Math.floor(e/6e4),a=e%6e4,r=Math.floor(a/1e3);return"".concat(n,":").concat(r>9?r:"0".concat(r))},L=a(6009),D=(0,r.block)("pay-with-near-pay-widget"),T=(0,r.block)("pay-with-near-pay-widget-description"),B=function(e){var n=e.payment,a=e.currency,r=e.onPay,s=e.onExpired;return(0,i.jsxs)(I,{className:D(),children:[(0,i.jsx)("div",{className:D("title"),children:n.name}),(0,i.jsx)("div",{className:D("description"),children:n.description}),(0,i.jsxs)("div",{className:T(),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:T("label"),children:"Payment: "}),(0,i.jsx)("div",{children:n.paymentId})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:T("label"),children:"Recipient: "}),(0,i.jsx)("div",{className:T("address"),children:n.address})]})]}),(0,i.jsx)(S,{expiryAt:n.expiryAt,onExpired:s}),(0,i.jsx)(C,{label:"Amount to Pay",value:n.displayAmount,currency:a,onValueChange:function(){},onCurrencySelectClick:function(){},selectDisabled:!0,className:"mb-4"}),(0,i.jsx)(y,{onClick:r,children:"Pay with NEAR wallet"}),(0,i.jsx)("div",{className:D("or"),children:"or"}),(0,i.jsx)("div",{className:D("qr-code-container"),children:(0,i.jsx)(L.tv,{value:"".concat(n.address,"?amount=").concat(n.displayAmount)})}),(0,i.jsx)("div",{className:D("payment-method-text"),children:"Scan following\xa0QR code with your wallet or\xa0enter Account\xa0ID\xa0and amount manually."}),(0,i.jsxs)("a",{href:"http://nearpay.co",target:"_blank",rel:"noopener noreferrer",className:p()(D("link-nearpay")),children:[(0,i.jsx)("span",{className:D("link-nearpay_gray"),children:"Powered by"}),"  ",(0,i.jsx)(t.v5,{className:D("link-nearpay_icon"),width:"20",height:"15"}),"  ",(0,i.jsx)("span",{children:"NearPay"})]})]})},U=a(9933),O=a(8767),V=a(4967),M=a(1591),X=a(2419),F="".concat(window.location.origin,"/payment"),W=function(e){var n=e.near,a=e.payment;return a?n.isAuthorized?function(){var e=(0,V.M)(+a.displayAmount);if(!e||!a.address)throw new Error("Data is empty");n.send(e,a.address,"".concat(F,"/").concat(a.paymentId,"/pending"))}:function(){return n.login({successUrl:"".concat(F,"/").concat(a.paymentId,"/send"),failureUrl:"".concat(F,"/").concat(a.paymentId,"/failure")})}:function(){throw new Error("Payment is empty")}},q=(0,r.block)("pay-with-near-payment-page");var Q=function(){var e=function(){var e=(0,X.ZP)("currencies",U.i6.U),n=(0,M.V)(),a=n.payment,r=n.isExpired,s=n.handleExpired,i=(0,V.T)(),c=W({near:i,payment:null!==a&&void 0!==a?a:null}),l=(0,h.useMemo)((function(){var n;return null===(n=e.data)||void 0===n?void 0:n.find((function(e){return e.ticker===O.N.defaultCurrency}))}),[e]);return{isExpired:r,isLoaded:!!e.data&&(!!a||r)&&i.isReady,payment:a,currencies:e.data,currency:l,handlerPay:c,handleExpired:s}}(),n=e.currency,a=e.payment,r=e.isLoaded,s=e.isExpired,c=e.handlerPay,d=e.handleExpired;return r?s?(0,i.jsxs)(t.RX,{className:q(),children:[(0,i.jsx)("span",{className:q("message"),children:"This payment link is expired"}),(0,i.jsx)("a",{className:q("link"),href:O.N.payWithNearUrl,children:"Back to shop"})]}):a&&n?(0,i.jsxs)(t.RX,{children:[(0,i.jsx)(B,{payment:a,currency:n,onPay:c,onExpired:d}),(0,i.jsx)(l,{})]}):null:(0,i.jsx)(t.RX,{children:(0,i.jsx)(t.zL,{children:(0,i.jsx)(t.aN,{})})})}}}]);
//# sourceMappingURL=59.8caea3ca.chunk.js.map